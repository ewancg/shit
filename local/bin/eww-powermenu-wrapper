#!/usr/bin/env bash

function show_backdrop {
    for i in $(seq 0 "$(expr $(hyprctl -j monitors | gojq -r length) - 1)"); do {
            export model="$(hyprctl -j monitors | gojq -r "first(.[$i]) | .model")"
            eww open backdrop --screen="$model" --id="$i"
    }
    done

}

export timeout=5

queue 
case $1 in
  "suspend") 
    ;&
  "poweroff") 
    ;&
  "reboot") 
    mode="$1"
    nohup eww-timeout-event "$mode" 5 &
    show_backdrop
    eww-toggle-window prompt default --arg mode="$1" --arg pid="$pid" --arg t="$timeout"
    ;;
  *)
    notify-send "Unknown parameter"
    ;;
esac